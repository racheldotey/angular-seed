<div class="page admin dashboard">
    
    <div class="page-header">
        <h1>Member Profile</h1>
    </div>
    
    <div class="row">
        <div class="col-xs-12 col-sm-3 col-md-4 align-center">
            <img src="http://www.gravatar.com/avatar/{{user.email | gravatar}}?s=200"
                 class="img-responsive img-thumbnail top"/>
            <p class="text-muted">Update at <a href="http://www.gravatar.com/" target="_blank">gravatar.com</a>.</p>
        </div>
        <div class="col-xs-12 col-sm-9 col-md-8">
          
         
            <h4>General</h4>
            <div data-rc-bootstrap-alerts="generalFormAlerts"></div>
            <div data-rc-bootstrap-alerts="editHostInformationAlerts"></div>
            <form ng-if="!editGeneralMode  && isUserRoleHost==false"" class="form-horizontal">

                <div class="form-group">
                    <label for="nameFirst" class="col-sm-3 control-label">First Name</label>
                    <div class="col-sm-9">
                        <p class="form-control-static">{{user.nameFirst}}</p>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="nameLast" class="col-sm-3 control-label">Last Name</label>
                    <div class="col-sm-9">
                        <p class="form-control-static">{{user.nameLast}}</p>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="email" class="col-sm-3 control-label">Email</label>
                    <div class="col-sm-9">
                        <p class="form-control-static">{{user.email}}</p>
                    </div>
                </div>
                

                <div class="form-group">
                    <label for="email" class="col-sm-3 control-label">Phone Number</label>
                    <div class="col-sm-9">
                        <p class="form-control-static">{{user.phone}}</p>
                    </div>
                </div>
                
                <div data-rc-bootstrap-alerts="generalPasswordupdateAlerts"></div>
                <br />
                <div class="form-group text-right">
                    <div class="col-xs-12">
                        <button ng-if="!editPasswordMode && !editHostInformationMode" ng-click="buttonShowChangePassword()" type="button" class="btn btn-default">Change Password</button>
                        <button ng-if="!editPasswordMode && !editHostInformationMode" ng-click="buttonShowGeneralEdit()" type="button" class="btn btn-primary">Edit</button>
                    </div>
                </div>
                 
            </form>

            <form ng-if="isUserRoleHost && !editHostInformationMode" class="form-horizontal">
               
                <div class="form-group">
                    <label for="nameFirst" class="col-sm-3 control-label">First Name</label>
                    <div class="col-sm-9">
                        <p class="form-control-static">{{userHostInfo.nameFirst}}</p>
                    </div>
                </div>
                <div class="form-group">
                    <label for="nameLast" class="col-sm-3 control-label">Last Name</label>
                    <div class="col-sm-9">
                        <p class="form-control-static">{{userHostInfo.nameLast}}</p>
                    </div>
                </div>
                <div class="form-group">
                    <label for="email" class="col-sm-3 control-label">Email</label>
                    <div class="col-sm-9">
                        <p class="form-control-static">{{userHostInfo.email}}</p>
                    </div>
                </div>
                <div class="form-group">
                    <label for="email" class="col-sm-3 control-label">Phone Number</label>
                    <div class="col-sm-9">
                        <p class="form-control-static">{{userHostInfo.phone}}</p>
                    </div>
                </div>
                <div class="form-group">
                    <label for="email" class="col-sm-3 control-label">Phone Extension</label>
                    <div class="col-sm-9">
                        <p class="form-control-static">{{userHostInfo.phone_extension}}</p>
                    </div>
                </div>
                <div class="form-group">
                    <label for="email" class="col-sm-3 control-label">Address</label>
                    <div class="col-sm-9">
                        <p class="form-control-static">{{userHostInfo.host_address}}</p>
                    </div>
                </div>
                <div class="form-group">
                    <label for="email" class="col-sm-3 control-label">Address 2</label>
                    <div class="col-sm-9">
                        <p class="form-control-static">{{userHostInfo.host_addressb}}</p>
                    </div>
                </div>
                <div class="form-group">
                    <label for="email" class="col-sm-3 control-label">City</label>
                    <div class="col-sm-9">
                        <p class="form-control-static">{{userHostInfo.host_city}}</p>
                    </div>
                </div>
                <div class="form-group">
                    <label for="email" class="col-sm-3 control-label">State</label>
                    <div class="col-sm-9">
                        <p class="form-control-static">{{userHostInfo.host_state}}</p>
                    </div>
                </div>
                <div class="form-group">
                    <label for="email" class="col-sm-3 control-label">Zip</label>
                    <div class="col-sm-9">
                        <p class="form-control-static">{{userHostInfo.host_zip}}</p>
                    </div>
                </div>
                <div class="form-group">
                    <label for="email" class="col-sm-3 control-label">Website</label>
                    <div class="col-sm-9">
                        <p class="form-control-static">{{userHostInfo.host_website}}</p>
                    </div>
                </div>
                <div class="form-group">
                    <label for="email" class="col-sm-3 control-label">Facebook</label>
                    <div class="col-sm-9">
                        <p class="form-control-static">{{userHostInfo.host_facebook}}</p>
                    </div>
                </div>
               
                <hr />
                <div class="form-group row" n>
                    <div class="col-xs-12">
                        <h4>Location(s) where you host live trivia games</h4>
                    </div>
                </div>
                
                <table datatable="ng" dt-instance="dtInstance" dt-options="dtOptions" class="table table-dark ng-isolate-scope dataTable no-footer dtr-column collapsed" ng-cloak>
                    <thead>
                        <tr>
                            <th>Joint Name</th>
                            <th>Trivia Day</th>
                            <th>Trivia Time</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="Venue in hostVenueList ">
                            <td class="is-table-column"> {{Venue.name}} </td>
                            <td class="is-table-column"> {{Venue.triviaDay}} </td>
                            <td class="is-table-column"> {{Venue.triviaTime}} </td>
                        </tr>
                    </tbody>
                </table>
                <hr />
                <div data-rc-bootstrap-alerts="generalPasswordupdateAlerts"></div>
               
                <div class="form-group text-right">
                    <div class="col-xs-12">
                        <button ng-if="!editPasswordMode && !editHostInformationMode"  ng-click="buttonShowChangePassword()" type="button" class="btn btn-default">Change Password</button>
                        <button ng-if="!editPasswordMode && !editHostInformationMode" ng-click="buttonShowGeneralEditHost()" type="button" class="btn btn-primary">Edit</button>
                    </div>
                </div>
             
            </form>
            
            <form ng-if="editGeneralMode" name="form.general" class="form-horizontal">
                <div data-rc-bootstrap-alerts="generalFormAlerts"></div>
                <br />

                <div class="form-group">
                    <label for="nameFirst" class="col-sm-3 control-label">First Name</label>
                    <div class="col-sm-9">
                        <input ng-model="editingUser.nameFirst" type="text" class="form-control" name="nameFirst" required>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="nameLast" class="col-sm-3 control-label">Last Name</label>
                    <div class="col-sm-9">
                        <input ng-model="editingUser.nameLast" type="text" class="form-control" name="nameLast" required>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="email" class="col-sm-3 control-label">Email</label>
                    <div class="col-sm-9">
                        <input ng-model="editingUser.email" type="email" ng-pattern="/^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/" class="form-control" name="email" required>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="phone" class="col-sm-3 control-label">Phone Number</label>
                    <div class="col-sm-9">
                        <input ng-model="editingUser.phone" type="text" class="form-control" name="phone">
                    </div>
                </div>
                
                <div class="form-group text-right">
                    <div class="col-xs-12">
                        <button ng-click="buttonCancel()" type="button" class="btn btn-default">Cancel</button>
                        <button ng-click="buttonSave()" type="button" class="btn btn-primary">Save General</button>
                    </div>
                </div>
                
            </form>
            
            <form ng-if="editPasswordMode" name="form.password" class="form-horizontal">
                <hr/>
                
                <h4 class="title">Password</h4>
            
                <div data-rc-bootstrap-alerts="passwordFormAlerts"></div>
                
                <div class="form-group">
                    <label for="password" class="col-sm-3 control-label">Current Password</label>
                    <div class="col-sm-9">
                        <input ng-model="changePassword.current" maxlength="55" type="password" class="form-control" name="password" required>
                    </div>
                </div>
                
                <div ng-if="showPasswordRules" class="form-group">
                    <div class="col-sm-9 col-sm-push-3">
                        <div class="alert alert-info" role="alert">
                            <p><strong>Passwords Must:</strong></p>
                            <ul>
                                <li>Be at least 8 characters in length.</li>
                                <li>Contain at least one letter and number.</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="newPassword" class="col-sm-3 control-label">New Password</label>
                    <div class="col-sm-9">
                        <input ng-model="changePassword.new" 
                               ng-change="onChangeValidatePassword()" 
                               type="password" class="form-control" name="newPassword" required>
                    </div>
                </div>
                
                <div ng-if="showPasswordMissmatch" class="form-group">
                    <div class="col-sm-9 col-sm-push-3">
                        <div class="alert alert-info" role="alert">
                            <p>Passwords must match</p>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="confirmPassword" class="col-sm-3 control-label">Confirm Password</label>
                    <div class="col-sm-9">
                        <input ng-model="changePassword.confirm" 
                               ng-change="onChangeValidateConfirmPassword()" 
                               type="password" class="form-control" name="confirmPassword" required>
                    </div>
                </div>
                
                <div class="form-group text-right">
                    <div class="col-xs-12">
                        <button ng-click="buttonCancel()" type="button" class="btn btn-default">Cancel</button>
                        <button ng-click="buttonChangePassword()" type="button" class="btn btn-primary">Change Password</button>
                    </div>
                </div>
                
            </form>
            
            <form  ng-if="isUserRoleHost && editHostInformationMode"  name="form.host" class="form-horizontal" ng-cloak>
                <br />
                <div class="form-group row">
                    <div class="col-xs-6">
                        <input ng-model="userHostInfo.nameFirst" type="text" class="form-control" name="nameFirst" placeholder="Contact First Name" maxlength="255" required>
                    </div>

                    <div class="col-xs-6">
                        <input ng-model="userHostInfo.nameLast" type="text" class="form-control" name="nameLast" placeholder="Contact Last Name" maxlength="255" required>
                    </div>
                </div>

                <div class="form-group row">
                    <div class="col-xs-12">
                        <input ng-model="userHostInfo.email" ng-disabled="true"  type="email" class="form-control" name="email" placeholder="Contact Email" maxlength="255" required>
                    </div>
                </div>

                <div class="form-group row">
                    <div class="col-xs-12">
                        <input ng-model="userHostInfo.host_address" type="text" class="form-control" name="address" placeholder="Joint Address" maxlength="255" required>
                    </div>
                </div>

                <div class="form-group row">
                    <div class="col-xs-12">
                        <input ng-model="userHostInfo.host_addressb" type="text" class="form-control" name="addressb" placeholder="Joint Address Con't" maxlength="255">
                    </div>
                </div>

                <div class="form-group row">
                    <div class="col-xs-6">
                        <input ng-model="userHostInfo.host_city" type="text" class="form-control" name="city" placeholder="Joint City" maxlength="255" required>
                    </div>

                    <div class="col-xs-3">
                        <select rc-drop-down-states ng-model="userHostInfo.host_state" class="form-control" required>
                            <option value="">State</option>
                        </select>
                    </div>

                    <div class="col-xs-3">
                        <input ng-model="userHostInfo.host_zip" type="text" class="form-control" name="zip" placeholder="Zip" maxlength="9" required ng-pattern="/^[0-9]+$/">
                        <div ng-show="form.host.zip.$error.pattern">
                            <br />
                            <span style="border-radius:inherit" class="alert alert-danger" ng-show="form.host.zip.$error.pattern">Invalid zip</span>
                        </div>
                    </div>
                </div>

                <div class="form-group row">
                    <div class="col-xs-8">
                        <input type="text" class="form-control" placeholder="Joint Phone" ng-model="userHostInfo.phone" ui-mask="(999) 999-9999" ui-mask-placeholder ui-mask-placeholder-char="_" ng-model-options="{ updateOn: 'blur' }" ng-change="handlePhoneChangeEvent(userHostInfo.phone)" required />
                    </div>
                    <div class="col-xs-4">
                        <input type="text" class="form-control" placeholder="Ext" ng-model="userHostInfo.phone_extension" maxlength="5"  />
                    </div>
                </div>
                <div ng-if="showPhoneValidation" class="form-group">
                    <div class="col-xs-12">
                        <div class="alert alert-warning" role="alert">
                            <p>Phone Number is Invalid.</p>
                        </div>
                    </div>
                </div>
                <div class="form-group row">
                    <div class="col-xs-12">
                        <input ng-model="userHostInfo.host_website" class="form-control" name="website" placeholder="Joint Website (http://...)" maxlength="255" type="url" url-input required>
                    </div>
                </div>

                <div class="form-group row">
                    <div class="col-xs-12">
                        <input ng-model="userHostInfo.host_facebook" class="form-control" name="facebook" placeholder="Joint Facebook Page (http://...)" maxlength="255" type="url" url-input ng-pattern='/(?:https?:\/\/)?(?:www\.)?facebook\.com\/(?:(?:\w)*#!\/)?(?:pages\/)?(?:[\w\-]*\/)*([\w\-\.]*)/' required>
                    </div>
                </div>
                <hr />
                <div class="form-group row" n>
                    <div class="col-xs-12">
                        <p>Please select and/or add the Joint location(s) where you host live trivia games</p>
                    </div>
                </div>
                <div class="form-group row">
                    <div class="col-md-5">
                            <label>Existing Joint</label>
                            <div rc-trivia-select-list-venue="VenuesDropDown.venue" teams-list-data="publicVenuesList"></div>
                    </div>
                    <div class="col-md-3 pull-left" style="text-align:right">
                        <div class="form-group">
                            <div class="" style="margin-top:28px">
                                <div class="btn-group btn-group-sm" uib-dropdown>
                                    <button id="split-button" type="button" class="btn btn-info" ng-click="buttonAddHostVenue()"><i class="fa fa-plus"></i> Add Joint</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3 pull-right">
                        <div class="form-group">
                            <div class="" style="margin-top:28px">
                                <div class="btn-group btn-group-sm" uib-dropdown>
                                    <button id="split-button" type="button" class="btn btn-info" ng-click="buttonOpenNewVenueModal()"><i class="fa fa-plus"></i> Add New Joint</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div data-rc-bootstrap-alerts="alertHostVenue"></div>
                <hr />
                <table datatable="ng" dt-instance="dtInstance" dt-options="dtOptions" class="table table-dark ng-isolate-scope dataTable no-footer dtr-column collapsed" ng-cloak>
                    <thead>
                        <tr>
                            <th>Joint Name</th>
                            <th>Trivia Day</th>
                            <th>Trivia Time</th>
                            <th>&nbsp;</th>
                            <th>&nbsp;</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="Venue in hostVenueList " ng-include="getDisplayTemplate(Venue)"></tr>
                    </tbody>
                </table>
                <hr />
                <div data-rc-bootstrap-alerts="editHostInformationAlerts"></div>
                <div class="form-group text-right">
                    <div class="col-xs-12">
                        <button ng-click="buttonCancel()" type="button" class="btn btn-default">Cancel</button>
                        <button ng-click="buttonSaveHostInformation()" type="button" class="btn btn-primary">Save Information</button>
                    </div>
                </div>
            </form>

        </div>
    </div>
    
</div>
<script type="text/ng-template" id="displaytemplate">
    <td>{{Venue.name}}</td>
    <td>{{Venue.triviaDay}}</td>
    <td>{{Venue.triviaTime}}</td>
    <td>
        <button ng-click="editHostVenue(Venue)" type="button" class="btn btn-primary btn-xs pull-right"><span class="fa fa-lg  fa-pencil-square-o"></span></button>
    </td>
    <td>
        <button ng-click="buttonDeleteHostVenue(Venue.venue_id)" type="button" class="btn btn-primary btn-xs pull-right"><span class="fa fa-lg fa-trash-o"></span></button>
    </td>
</script>
<script type="text/ng-template" id="edittemplate">
    <td style="padding-top:35px;"> {{selectedHostVenue.name}}</td>
    <td>
        <div style="padding-top:35px;">
            <select rc-drop-down-days ng-model="defaultDayTime.triviaDay" class="form-control" required>
                <option value="">Trivia Day</option>
            </select>
        </div>
    </td>
    <td>
        <div class="col-xs-6">
            <uib-timepicker ng-model="defaultDayTime.triviaTimeDate" hour-step="1" minute-step="15" show-meridian="true"></uib-timepicker>
        </div>
    </td>
    <td style="padding-top:38px;">
        <button class="btn btn-primary" ng-if="!newMode" ng-click="updateHostVenue($index)">Update</button>
    </td>
    <td style="padding-top:38px;">
        <button class="btn btn-default pull-left" ng-click="resetDisplayTemplate()">Cancel</button>
    </td>
</script>